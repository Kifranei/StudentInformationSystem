# 学生教学管理一体化信息系统

这是一个为毕业设计而创建的全功能、响应式的教学管理系统。项目旨在模拟真实校园环境中的核心教务流程，为管理员、教师、学生三种不同角色提供定制化的操作界面和功能。

系统前端设计灵感来源于真实的校园教务系统，并在此基础上进行了现代化和响应式改造，实现了桌面端和移动端的完美适配。同时，项目加入了全新设计的**主题切换功能**，提升了用户体验。

## 主要功能

### 👨‍💻 管理员 (Administrator)

- **动态仪表盘**: 实时查看学生、教师、课程、选课人次等核心数据统计，并监控服务器运行状态（IIS、.NET版本、内存占用等）。
- **学生管理**: 完整的学生信息增、删、改、查（CRUD）及按姓名/学号搜索功能。
- **教师管理**: 完整的教师信息 CRUD 及按姓名/工号搜索功能。
- **班级管理**: 完整的班级信息（含专业、学年）CRUD 和搜索功能，并可直接在班级详情页为该班级添加学生。
- **课程管理**: 完整的课程信息 CRUD 及按课程名/教师名搜索功能，支持为课程指定类别（如专业必修、公共选修等）。
- **🎯 全系统课程安排管理**:
  - **查看课程安排**: 在课程列表中直接查看每门课程的所有时间安排
  - **统一排课管理**: 管理员可以为任意课程添加、编辑、删除课程安排
  - **智能冲突检测**: 自动检测教师时间冲突，确保排课合理性
  - **假日智能跳过**: 集成法定假日检测，自动处理假期周次
  - **权限优势**: 比教师拥有更高的排课权限，可管理全校所有课程安排
  - **影响范围提示**: 清晰显示每次操作对教师和学生课表的影响
- **考试管理**: 发布、修改、删除所有课程的考试安排，支持搜索考试安排。
- **选课记录查看**: 查看全校所有学生的选课记录，并支持搜索。
- **🔐 用户密码管理**: 
  - **统一默认密码**: 新建学生和教师时自动分配统一的默认密码 `Hzd@123456`
  - **JavaScript确认重置**: 重置密码功能采用弹窗确认，确保操作安全性
  - **即时生效**: 密码重置后立即生效，用户可直接使用新密码登录
  - **角色识别**: 系统自动识别用户角色，重置后跳转到对应的管理页面
- **个人密码修改**: 管理员可修改自己的登录密码。

### 👩‍🏫 教师 (Teacher)

- **个性化首页**: 登录后直接看到当日授课安排和快捷功能入口。
- **我的课表**: 查看个人完整授课表，支持按周切换，并可隐藏操作按钮以获得更简洁的视图，方便截图。
- **🎯 灵活课程安排管理**:
  - **添加课程安排**: 为课程创建灵活的时间安排，支持不同周次的不同时间和教室
  - **多时段教学**: 同一门课程可以有多个独立的时间安排（如：1-4周周五1-4节在310教室，6-8周周三5-8节在308教室）
  - **跳过特定周次**: 灵活处理法定假日等无课周次
  - **时间冲突检测**: 系统自动检测并防止教师时间冲突
  - **批量管理**: 统一查看和管理所有课程安排
- **在线调课**: 可修改自己所教课程的上课时间、地点、周次范围。
- **成绩录入**: 查看所教课程的学生名单，并为学生录入/修改成绩。
- **班级名单打印**: 为所教课程生成简洁、适合打印的学生名单。
- **考试管理**: 发布和管理**自己所教课程**的考试安排。
- **个人密码修改**: 教师可修改自己的登录密码。

### 🎓 学生 (Student)

- **个性化首页**: 登录后直接看到当日课程提醒和最新公布的成绩。
- **我的课表**: 查看个人课表，支持按周切换和**导出为图片**。
- **🎯 智能在线选课**:
  - **课程时间一目了然**: 选课时直接显示每门课程的详细上课时间、教室和周次安排
  - **分类筛选**: 按"专业必修"、"体育选修"等类别筛选课程
  - **已选课程管理**: 独立的"我的已选"页面，方便查看已选课程的完整时间安排和退选操作
  - **智能假日提示**: 自动标识包含法定假日的课程安排
  - **选课要求提示**: 满足最低选课门数要求的规则提示
  - **重修课程**: 挂科后自动出现"重修"课程列表，方便重新选择
  - **时间冲突预防**: 选课时可直观看到时间安排，避免时间冲突
- **我的成绩**: 查看所有已选课程的成绩单。
- **我的考试**: 查看自己所有课程的考试安排。
- **个人密码修改**: 学生可修改自己的登录密码。

## 🌟 特色功能：灵活课程安排系统

### 主题支持

当用户登录后（管理员/教师/学生）可以在页面顶部右上角 主题设置 里选择喜欢的主题色（页面的强调色会跟随改变，共6种：深蓝色、深红色、浅蓝色、浅绿色、海蓝色、浅紫色）

开启/关闭暗色模式（开启暗色模式后 退出登录后 登录页也会跟随变化）

## 📱 微信小程序 API 支持 (Mini Program API Support)

本项目已为配套的微信小程序 (`SIS-WxMiniProgram`) 提供完整的 RESTful API 支持。主要接口位于 `Controllers/MiniProgramApiController.cs`。

### 核心功能接口
* **用户鉴权 (Auth)**
    * `POST /api/miniprogram/login`: 用户登录，返回包含真实姓名 (RealName) 和角色 (Role) 的用户信息。
* **课表查询 (Timetable)**
    * `GET /api/miniprogram/timetable`: 根据用户 ID 获取个性化课表（支持学生和教师视角）。
* **学生端功能 (Student Features)**
    * `GET /api/miniprogram/grades`: 查询学生的选课及成绩信息。
* **教师端功能 (Teacher Features)**
    * `GET /api/miniprogram/mycourses`: 查询教师教授的课程列表及学分信息。
* **管理员功能 (Admin Features)**
    * `GET /api/miniprogram/stats`: 获取系统运行状态统计（包括用户、学生、教师、课程、班级总数）。

### 现实场景支持

系统支持贴近真实教学场景的复杂课程安排：

#### 示例：数据库管理与维护课程
- **第一阶段**: 第1-4周，周五 第1-4节，310教室
- **假期间隔**: 第5、9周无课（法定假日）
- **第二阶段**: 第6-8周，周三 第5-8节，308教室

### 主要特性

1. **多时段支持**: 一门课程可以创建多个独立的时间安排
2. **灵活周次**: 精确控制每个时间段的起止周次
3. **教室变更**: 不同时间段可以使用不同教室
4. **时间验证**: 自动检测教师时间冲突
5. **直观管理**: 提供专门的课程安排管理界面

### 使用流程

1. **添加课程安排**: 教师可以通过"添加课程安排"功能为课程创建时间安排
2. **设置详细信息**: 指定周次范围、上课时间、教室等详细信息
3. **系统验证**: 自动检查时间冲突和数据有效性
4. **灵活调整**: 随时通过"调整"功能修改已有安排
5. **统一管理**: 通过"管理安排"页面查看和管理所有课程安排

## 🔐 密码管理系统

### 统一密码策略
- **默认密码**: 所有新建用户（学生和教师）统一使用 `Hzd@123456` 作为初始密码
- **安全创建**: 新建用户时自动分配默认密码，确保立即可用
- **重置机制**: 管理员可通过JavaScript确认弹窗安全重置任意用户密码

### 用户密码管理
- **首次登录**: 建议用户首次登录后立即修改个人密码
- **密码要求**: 支持6位以上复杂密码，包含大小写字母、数字和特殊字符
- **安全提示**: 系统提供密码修改成功提示和错误处理

### 操作安全性
- **确认机制**: 重置密码操作需要JavaScript弹窗二次确认
- **权限控制**: 只有管理员可以重置其他用户密码
- **CSRF防护**: 所有密码相关操作都使用防伪令牌保护

## 技术栈

- **后端**: ASP.NET MVC 5, Entity Framework 6 (Database First)
- **前端**: HTML5, CSS3, Bootstrap 3, jQuery
- **数据库**: Microsoft SQL Server
- **核心第三方库**: html2canvas.js (用于课表截图)
- **开发环境**: .NET Framework 4.8.1, C# 7.3

## 如何运行

#### 1\. 环境准备

- Visual Studio 2017 或更高版本（推荐 Visual Studio 2022 Community）
- Microsoft SQL Server 2012 或更高版本（推荐SQL Server 2022 Develop）

#### 2\. 数据库设置

1. 打开 SQL Server Management Studio (SSMS)。
2. 创建一个新的空数据库（例如 `StudentManagementDB`）或 将项目中的 SQL 脚本文件（`/db/sql.sql`）（推荐）在新建的查询窗口中执行，以创建所有必需的数据库 表和样例数据。

#### 3\. 配置连接字符串

1. 打开 Visual Studio ，选择克隆存储库 ，将 `https://github.com/Kifranei/StudentInformationSystem.git` 粘贴到存储库位置的输入框中，执行克隆，随后打开项目根目录下的 `Web.config` 文件。

3. 找到 `<connectionStrings>` 配置节。

4. 修改 `data source` 的值为你自己的 SQL Server 实例名（如果是本地默认实例，通常是 `.` 或者 `localhost`）。确保 `initial catalog` 是你创建的数据库名。（使用我提供的 sql 脚本就不用改数据库名了，但需要改实例名）
```xml
<connectionStrings>
  <add name="Entities" connectionString="metadata=res://*/Models.Model1.csdl|res://*/Models.Model1.ssdl|res://*/Models.Model1.msl;provider=System.Data.SqlClient;provider connection string="data source=.;initial catalog=StudentManagementDB;integrated security=True;encrypt=False;MultipleActiveResultSets=True;App=EntityFramework"" providerName="System.Data.EntityClient" />
</connectionStrings>
```
#### 4\. 启动项目

1. 用 Visual Studio 打开 `.sln` 项目文件。
2. 按 `F5` 或点击"IIS Express"按钮来运行项目。

#### 5\. 默认登录信息

系统预设了以下测试账号：
- **管理员**: 用户名 `admin`，密码 `Hzd@123456`
- **学生**: 使用学号作为用户名，（例：`S2101001`）默认密码 `Hzd@123456`
- **教师**: 使用工号作为用户名，（例：`T001`）默认密码 `Hzd@123456`

## 许可证

该项目采用 [MIT许可证](https://opensource.org/licenses/MIT)。

## 致谢

本项目的完成离不开 GitHub Copilot 的协助。包括但不限于以下模型：Claude Sonnet 4，Gemini 2.5 Pro
